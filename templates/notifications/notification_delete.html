{% extends 'base.html' %}

{% block title %}알림 삭제 - 사규관리 시스템{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{% url 'notifications:list' %}">알림</a></li>
<li class="breadcrumb-item active">삭제</li>
{% endblock %}

{% block content %}
<h1 class="page-title"><i class="bi bi-trash me-2"></i>알림 삭제</h1>

<div class="card">
  <div class="card-body">
    {% if recipient_count > 1 %}
    <div class="alert alert-danger">
      <i class="bi bi-exclamation-triangle me-2"></i>
      <strong>일괄 삭제 경고:</strong> 이 알림은 <strong>{{ recipient_count }}명</strong>에게 발송된 알림입니다. 
      삭제 시 <strong>모든 수신자의 알림 {{ recipient_count }}건</strong>이 함께 삭제됩니다. 이 작업은 되돌릴 수 없습니다.
    </div>
    {% else %}
    <div class="alert alert-warning">
      <i class="bi bi-exclamation-triangle me-2"></i>
      정말로 이 알림을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.
    </div>
    {% endif %}
    
    <div class="card mb-4">
      <div class="card-header">삭제할 알림</div>
      <div class="card-body">
        <dl class="row mb-0">
          <dt class="col-sm-3">유형</dt>
          <dd class="col-sm-9">
            <span class="badge bg-{{ notification.get_type_color }}">
              {{ notification.get_notification_type_display }}
            </span>
          </dd>
          
          <dt class="col-sm-3">제목</dt>
          <dd class="col-sm-9">{{ notification.title }}</dd>
          
          <dt class="col-sm-3">내용</dt>
          <dd class="col-sm-9">{{ notification.message }}</dd>
          
          <dt class="col-sm-3">수신자</dt>
          <dd class="col-sm-9">{{ notification.user.get_full_name }} ({{ notification.user.username }})</dd>
          
          <dt class="col-sm-3">생성일시</dt>
          <dd class="col-sm-9">{{ notification.created_at|date:"Y-m-d H:i" }}</dd>
        </dl>
      </div>
    </div>
    
    <form method="post">
      {% csrf_token %}
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-danger">
          <i class="bi bi-trash me-1"></i>삭제
        </button>
        <a href="{% url 'notifications:list' %}" class="btn btn-outline-secondary">
          <i class="bi bi-x-lg me-1"></i>취소
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}

